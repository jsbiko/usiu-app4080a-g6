<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reset Password • USIU G6 SaaS</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="description" content="Reset your password for USIU G6 SaaS." />
    <!-- Google Font & general UI CSS-->
    <link rel="stylesheet" href="assets/css/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
    <script src="assets/js/auth.js"></script>
    <!-- Font Awesome icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <div id="progress-bar"></div>
    <header class="navbar" id="navbar">
      <div class="container nav-container">
        <h1 class="logo">USIU G6</h1>
        <nav>
          <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="our-work.html">Sample Project</a></li>
            <li><a href="pricing.html">Pricing</a></li>
            <li><a href="our-team.html">Developers</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
          </ul>
        </nav>
        <div class="nav-buttons">
          <a href="login.html" class="btn-outline">Login</a>
          <a href="signup.html" class="btn-primary">Sign Up</a>
        </div>
        <div class="menu-toggle" id="menu-toggle">☰</div>
      </div>
      <div id="menu-overlay" class="menu-overlay"></div>
      <ul id="mobile-menu" class="nav-links"></ul>
    </header>

    <!-- ================= Reset Password Form ================= -->
    <main>
      <section class="hero-bg">
        <div class="container auth" style="max-width: 690px">
          <h1 class="auth-header">Reset your password</h1>
          <p class="auth-lead">
            Enter your account email and we will send you a reset link.
          </p>

          <div class="auth-form">
            <div
              id="resetMessage"
              style="
                display: none;
                padding: 0.8rem;
                border-radius: 8px;
                margin-bottom: 1rem;
                text-align: center;
              "
            ></div>

            <form id="resetForm" autocomplete="on">
              <div class="form-grid single">
                <div class="form-group">
                  <label for="email">Email</label>
                  <input
                    id="email"
                    name="email"
                    type="email"
                    required
                    placeholder="you@example.com"
                    class="input"
                  />
                </div>

                <button type="submit" id="resetBtn" class="btn btn-primary">
                  Send reset link
                </button>
              </div>
            </form>

            <p class="auth-footer">
              <a href="login.html" class="link">Back to login</a>
            </p>
          </div>
        </div>
      </section>
    </main>

    <!-- ================= FOOTER ================= -->
    <!-- Scroll-To-Top Button -->
    <button id="scrollTopBtn" class="scroll-top">↑</button>

    <!-- Footer -->
    <footer class="site-footer">
      <!--<svg class="footer-wave" viewBox="0 0 1440 120" preserveAspectRatio="none" aria-hidden="true">
      <path d="M0,40 C240,120 480,0 720,40 C960,80 1200,120 1440,40 L1440,120 L0,120 Z" fill="url(#g)"></path>
      <defs>
        <linearGradient id="g" x1="0" x2="1" y1="0" y2="0">
          <stop offset="0%" stop-color="#1E3A8A"/>
          <stop offset="100%" stop-color="#3B82F6"/>
        </linearGradient>
      </defs>
    </svg>-->

      <div class="container footer-grid">
        <div class="footer-brand">
          <div class="footer-logo">USIU G6</div>
          <p>
            Modern tools to manage clients, automate tasks, and grow — all in
            one elegant platform.
          </p>
        </div>

        <div class="footer-links">
          <h4>Product</h4>
          <ul>
            <li><a href="#">Features</a></li>
            <li><a href="#">Integrations</a></li>
            <li><a href="#">Roadmap</a></li>
            <li><a href="#">Changelog</a></li>
          </ul>
        </div>

        <div class="footer-links">
          <h4>Company</h4>
          <ul>
            <li><a href="#">About</a></li>
            <li><a href="#">Careers</a></li>
            <li><a href="#">Press</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>

        <div class="footer-newsletter">
          <h4>Stay in the loop</h4>
          <p>Get product updates and tips straight to your inbox.</p>
          <form
            class="newsletter-form"
            onsubmit="event.preventDefault(); alert('Thanks for subscribing!')"
          >
            <input type="email" placeholder="Your email" required />
            <button class="btn-primary" type="submit">Subscribe</button>
          </form>
        </div>
      </div>

      <div class="footer-bottom">
        <div class="container footer-bottom-inner">
          <span>© 2025 USIU G6. All rights reserved.</span>
          <div class="footer-legal">
            <a href="#">Privacy</a>
            <a href="#">Terms</a>
            <a href="#">Security</a>
          </div>

          <div class="footer-socials-bottom">
            <a
              href="#"
              class="social-btn twitter"
              aria-label="Twitter"
              data-tooltip="Twitter"
              ><svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M22 5.8c-.7.3-1.5.6-2.3.6.8-.5 1.4-1.2 1.7-2.1-.7.4-1.6.8-2.5.9A4 4 0 0 0 12 8.7c0 .3 0 .6.1.9A11.5 11.5 0 0 1 3 5.2a4 4 0 0 0 1.2 5.4c-.6 0-1.2-.2-1.7-.5v.1a4 4 0 0 0 3.2 3.9c-.3.1-.6.1-.9.1-.2 0-.5 0-.7-.1a4 4 0 0 0 3.8 2.8A8.1 8.1 0 0 1 2 19.3a11.5 11.5 0 0 0 6.2 1.8c7.5 0 11.7-6.2 11.7-11.7v-.5c.8-.5 1.5-1.2 2.1-2.1z"
                /></svg
            ></a>
            <a
              href="#"
              class="social-btn linkedin"
              aria-label="LinkedIn"
              data-tooltip="LinkedIn"
              ><svg viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M6.94 6.5A2.44 2.44 0 1 1 4.5 4.06 2.45 2.45 0 0 1 6.94 6.5zM4.75 8.5h4.39V20H4.75zM14.12 8.5c-2.35 0-3.4 1.28-3.99 2.18V8.5H5.75V20h4.38v-5.91c0-1.56.3-3.07 2.22-3.07s2.02 1.7 2.02 3.17V20h4.38v-6.79c0-3.47-1.86-4.71-4.63-4.71z"
                /></svg
            ></a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@next/dist/aos.js" defer></script>
    <script src="assets/js/script.js" defer></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        AOS.init({ duration: 1000, once: true, offset: 100 });

        // Reset password form handler
        const resetForm = document.getElementById("resetForm");
        const resetBtn = document.getElementById("resetBtn");
        const resetMessage = document.getElementById("resetMessage");

        function showMessage(message, isError = false) {
          resetMessage.textContent = message;
          resetMessage.style.display = "block";
          resetMessage.style.backgroundColor = isError ? "#fee2e2" : "#d1fae5";
          resetMessage.style.color = isError ? "#991b1b" : "#065f46";
          resetMessage.style.border = isError
            ? "1px solid #fca5a5"
            : "1px solid #6ee7b7";
        }

        // Check if there's a token in URL (for actual password reset)
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get("token");

        if (token) {
          // Show password reset form
          document.querySelector(".auth-header").textContent =
            "Set New Password";
          document.querySelector(".auth-lead").textContent =
            "Enter your new password below.";

          resetForm.innerHTML = `
          <div class="form-grid single">
            <div class="form-group">
              <label for="newPassword">New Password</label>
              <input id="newPassword" 
              name="newPassword" 
              type="password" 
              required placeholder="Enter new password" 
              minlength="8"
              class="input" />
            </div>
            
            <div class="form-group">
              <label for="confirmPassword">Confirm Password</label>
              <input id="confirmPassword" 
              name="confirmPassword" 
              type="password" 
              required placeholder="Confirm new password" 
              minlength="8"
              class="input" />
            </div>

            <button type="submit" id="resetBtn" class="btn btn-primary">Reset Password</button>
          </div>
        `;

          resetForm.addEventListener("submit", async (e) => {
            e.preventDefault();

            const newPassword = document.getElementById("newPassword").value;
            const confirmPassword =
              document.getElementById("confirmPassword").value;

            if (newPassword !== confirmPassword) {
              showMessage("Passwords do not match", true);
              return;
            }

            const btn = document.getElementById("resetBtn");
            btn.disabled = true;
            btn.textContent = "Resetting...";

            try {
              await window.AuthAPI.resetPassword(token, newPassword);
              showMessage("Password reset successful! Redirecting to login...");

              setTimeout(() => {
                window.location.href = "/client/login.html";
              }, 2000);
            } catch (error) {
              showMessage(
                error.message || "Password reset failed. Please try again.",
                true
              );
              btn.disabled = false;
              btn.textContent = "Reset Password";
            }
          });
        } else {
          // Show forgot password form
          resetForm.addEventListener("submit", async (e) => {
            e.preventDefault();

            const email = document.getElementById("email").value;

            resetBtn.disabled = true;
            resetBtn.textContent = "Sending...";

            try {
              const result = await window.AuthAPI.forgotPassword(email);
              showMessage(
                "If the email exists, a reset link has been sent to your inbox."
              );

              // For development: show the reset URL
              if (result.reset_url) {
                setTimeout(() => {
                  showMessage("Development mode: " + result.reset_url);
                }, 2000);
              }

              resetBtn.disabled = false;
              resetBtn.textContent = "Send reset link";
            } catch (error) {
              showMessage(
                error.message || "Failed to send reset link. Please try again.",
                true
              );
              resetBtn.disabled = false;
              resetBtn.textContent = "Send reset link";
            }
          });
        }
      });
    </script>
  </body>
</html>
